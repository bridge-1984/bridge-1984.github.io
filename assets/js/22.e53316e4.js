(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{412:function(t,a,s){"use strict";s.r(a);var e=s(1),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" cookie")]),t._v(" "),a("ol",[a("li",[t._v("特点：cookie 是最简单的本地存储方式，当我们发起网络请求时，会将cookie添加到请求的header中的cookie字段。因此cookie的体积限制严格，一般不超过 4k，且由于不管cookie会不会用到都会被带上，会增加网络开销。")]),t._v(" "),a("li",[t._v("属性：cookie的属性包括 expires、domain、path、secure、HttpOnly，每个属性之间通过 "),a("code",[t._v(";")]),t._v(" 隔开。具体格式如下")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"key=name; expires=Thu, 25 Feb 2016 04:18:00 GMT;domain=ppsc.sankuai.com; path=/; secure; HttpOnly"\n')])])]),a("ul",[a("li",[a("p",[t._v("expires")]),t._v(" "),a("ul",[a("li",[t._v("expires 属性设置了 cookie 过期的时间，且时间格式必须为 "),a("code",[t._v("GMT")]),t._v(" 格式（可以通过 "),a("code",[t._v("new Date().toGMTString()")]),t._v(" 或者 "),a("code",[t._v("new Date().toUTCString()")]),t._v(" 来获得））。")]),t._v(" "),a("li",[t._v("如果没有设置，则默认浏览器关闭后失效。")]),t._v(" "),a("li",[t._v("失效的cookie会被浏览器清除")])])]),t._v(" "),a("li",[a("p",[t._v("domain 和 path")]),t._v(" "),a("ul",[a("li",[t._v("domain 是 域名，path 是 路径，两者结合限制了 cookie 能被哪些 URL 访问。如果 http 请求的域名与 domain 相同或是其子域，且路径与 path 相同或是其子路径，则该 http 请求的 header 会带上该 cookie")]),t._v(" "),a("li",[t._v("如果不进行设置，domain 默认值为当前域名，path 默认值为当前路径")])])]),t._v(" "),a("li",[a("p",[t._v("secure")]),t._v(" "),a("ul",[a("li",[t._v("设置了 secure 则 cookie 只会在 HTTPS 或其他安全协议的请求时携带")]),t._v(" "),a("li",[t._v("默认不开启")])])]),t._v(" "),a("li",[a("p",[t._v("httponly")]),t._v(" "),a("ul",[a("li",[t._v("设置了 HttpOnly 为 true 后，将无法通过 js 获取、修改、删除这个 cookie，只能通过服务器去操作这个 cookie")]),t._v(" "),a("li",[t._v("默认不开启")])])])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("方法："),a("code",[t._v('document.cookie = " "')]),a("br"),t._v("\ncookie 的 增、删、改都使用上述方法。删除时只需要把 expires 的值设为过去的时间，其他属性保持一致即可将改 cookie 删除；修改时只需要重新赋值，其他属性保持一致即可覆盖旧值。")])]),t._v(" "),a("h2",{attrs:{id:"webstorage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webstorage"}},[t._v("#")]),t._v(" webStorage")]),t._v(" "),a("p",[t._v("以键值对形式存储，存储的方式只能为字符串，可分为以下两种：")]),t._v(" "),a("h3",{attrs:{id:"localstorage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[t._v("#")]),t._v(" localStorage")]),t._v(" "),a("p",[t._v("特点：持久化的本地存储，数据永远不会过期，关闭浏览器也不会丢失")]),t._v(" "),a("h3",{attrs:{id:"sessionstorage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[t._v("#")]),t._v(" sessionStorage")]),t._v(" "),a("p",[t._v("特点：同一个会话中的页面才能访问且会话结束后数据随之销毁。")]),t._v(" "),a("blockquote",[a("p",[t._v("通过点击链接（或者用了 window.open）打开的新标签页之间是属于同一个 session 的，但新开一个标签页总是会初始化一个新的 session，即使网站是一样的，它们也不属于同一个 session。")])]),t._v(" "),a("p",[t._v("localStorage 和 sessionStorage 有着统一的API接口，以 localStorage 为例")]),t._v(" "),a("ol",[a("li",[t._v("设置")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 设置键值对 **/")]),t._v("\n  localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法1")]),t._v("\n  localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法2")]),t._v("\n  localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法3")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** key 和 value 必须是字符串，当 value 是数组或对象是，必须先转化成字符串 **/")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'张三'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可用 JSON.stringify() 将对象或数组转换成字符串，获取时调用 JSON.parse() 转换回去")]),t._v("\n   localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("获取")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("移除")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除某个localStorage")]),t._v("\n  localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除所有")]),t._v("\n\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("获取长度")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length \n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("通过索引获取对应位置的 key 值")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("与cookie的区别：")]),a("br"),t._v("\n1）存储方式：cookie数据始终在同源的http请求中携带，会在客户端与服务器端来回传送；而webStorage只会将数据存储在本地"),a("br"),t._v("\n2）存储大小：cookie数据由于每次http请求都要携带，所以体积限制严格，一般不超过4k；而webStorage限制较小，可以达到5M或更大"),a("br"),t._v("\n3）生命周期：cookie在其设定的过期时间前有效；webStorage生命周期如上面所写")]),t._v(" "),a("h2",{attrs:{id:"应用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),a("p",[t._v("cookie 常用于记录用户登录信息，或利用cookie跟踪记录用户点击次数、停留时间等习惯"),a("br"),t._v("\nsessionStorage 常用于页面间传递信息"),a("br"),t._v("\nlocalStorage 可用于存储访问该页面的次数或某些固定不变的信息")]),t._v(" "),a("blockquote",[a("p",[t._v("参考文章："),a("br"),t._v(" "),a("a",{attrs:{href:"https://blog.csdn.net/qq_32524751/article/details/74079668",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTML5的几种存储方式"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://segmentfault.com/a/1190000010400892",target:"_blank",rel:"noopener noreferrer"}},[t._v("cookie、sessionStorage、localStorage 详解及应用场景"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);